"use strict";(self.webpackChunk_1_inch_docs=self.webpackChunk_1_inch_docs||[]).push([[1403],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),h=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=h(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=h(a),d=i,m=u["".concat(s,".").concat(d)]||u[d]||p[d]||r;return a?n.createElement(m,o(o({ref:t},c),{},{components:a})):n.createElement(m,o({ref:t},c))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:i,o[1]=l;for(var h=2;h<r;h++)o[h]=a[h];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5762:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>h});var n=a(87462),i=(a(67294),a(3905));const r={sidebar_label:"API Troubleshooting"},o="1inch API troubleshooting",l={unversionedId:"educational-resources/intermediate/1inch-api-troubleshooting",id:"educational-resources/intermediate/1inch-api-troubleshooting",title:"1inch API troubleshooting",description:"In this article, we will cover:",source:"@site/docs/educational-resources/intermediate/1inch-api-troubleshooting.mdx",sourceDirName:"educational-resources/intermediate",slug:"/educational-resources/intermediate/1inch-api-troubleshooting",permalink:"/docs/educational-resources/intermediate/1inch-api-troubleshooting",draft:!1,editUrl:"https://github.com/1inch/1inch-docs/edit/master/docs/educational-resources/intermediate/1inch-api-troubleshooting.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"API Troubleshooting"},sidebar:"tutorialSidebar",previous:{title:"1inch Liquidity Sources",permalink:"/docs/educational-resources/intermediate/1inch-Liquidity-Sources"},next:{title:"CORS-Error-FAQ",permalink:"/docs/educational-resources/intermediate/CORS-Error-FAQ"}},s={},h=[{value:"In this article, we will cover:",id:"in-this-article-we-will-cover",level:3},{value:"What is the rate limit?",id:"what-is-the-rate-limit",level:3},{value:"&quot;Insufficient Liquidity&quot; error",id:"insufficient-liquidity-error",level:3},{value:"&quot;Cannot Estimate&quot;",id:"cannot-estimate",level:3},{value:"Troubleshooting insufficient allowance / balance",id:"troubleshooting-insufficient-allowance--balance",level:3},{value:"What are the &quot;parts&quot; parameters?",id:"what-are-the-parts-parameters",level:3},{value:"What is the &quot;Complexity level?&quot;",id:"what-is-the-complexity-level",level:3},{value:"How can I limit the liquidity sources in the query?",id:"how-can-i-limit-the-liquidity-sources-in-the-query",level:3},{value:"Still have questions?",id:"still-have-questions",level:4}],c={toc:h},u="wrapper";function p(e){let{components:t,...r}=e;return(0,i.kt)(u,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"1inch-api-troubleshooting"},"1inch API troubleshooting"),(0,i.kt)("h3",{id:"in-this-article-we-will-cover"},"In this article, we will cover:"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_cdaa0dc28c"},"What is the rate limit?")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_26a92a140f"},'"Insufficient Liquidity" error')),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_fdfd390620"},'"Cannot Estimate"')),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_57ea327d34"},"Insufficient allowance / balance")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_caa7c96bf6"},'What are the "parts" parameters?')),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_f7a65b4db1"},'What is the "Complexity level?"')),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"what-is-the-rate-limit"},"What is the rate limit?"),(0,i.kt)("p",null,"As of August 2023, all public API usage has been reduced to 1 requests per second (rps). For increased limits, please visit ",(0,i.kt)("a",{parentName:"p",href:"https://portal.1inch.dev"},"https://portal.1inch.dev")," to apply for an enterprise endpoint. "),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Please note: All 1inch Network API users must now register and obtain an API key at ",(0,i.kt)("a",{parentName:"em",href:"https://portal.1inch.dev/"},"https://portal.1inch.dev/"),".")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"insufficient-liquidity-error"},'"Insufficient Liquidity" error'),(0,i.kt)("p",null,"This error can occur for a number of reasons:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The liquidity pool has not been queried - make sure one of the aggregated sources has at least 10k of a connector token listed below."),(0,i.kt)("li",{parentName:"ul"},'If you\'re getting a quote, please make sure to take into account the decimals of the token. Do not include decimal places in the "from token amount". The API returns the number of decimal places the token supports when calling /quote or /swap'),(0,i.kt)("li",{parentName:"ul"},"There's an error in the server and is unable to find a path, this may require contacting the 1inch support team for more investigation.")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"cannot-estimate"},'"Cannot Estimate"'),(0,i.kt)("p",null,"This error occurs when the eth_estimateGas RPC call throws an error. There are many reasons why this can throw an error, and they all tend to mean the transaction is guaranteed to fail. This is a protection, so a transaction is broadcast that's going to fail. To find the precise error, disableEstimate=true can be used in the query and an eth_estimateGas RPC call can be done locally. The transaction can also be simulated with a platform like tenderly or blocknative for a better look at the transaction trace."),(0,i.kt)("p",null,"Some common reasons why a transaction may fail:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A token has a fee on transfer or swap and the slippage tolerance needs to be increased"),(0,i.kt)("li",{parentName:"ul"},"A token has a fee on transfer ",(0,i.kt)("em",{parentName:"li"},"and")," the fee and referrer parameter is set causing the transaction to always fail"),(0,i.kt)("li",{parentName:"ul"},"The rate has expired and changed in the latest block.")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"troubleshooting-insufficient-allowance--balance"},"Troubleshooting insufficient allowance / balance"),(0,i.kt)("p",null,"In the case of one of these errors, you may not have a",(0,i.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/6147312-token-approvals"}," token approval")," or you're missing the token balance. To do a token approval, you can use the API to approve the token to the 1inch router."),(0,i.kt)("p",null,(0,i.kt)("img",{src:a(94012).Z,width:"878",height:"562"})),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"what-are-the-parts-parameters"},'What are the "parts" parameters?'),(0,i.kt)("p",null,"The parts parameters is comprised of 3 things"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"mainRouteParts"),(0,i.kt)("li",{parentName:"ul"},"virtualParts"),(0,i.kt)("li",{parentName:"ul"},"parts")),(0,i.kt)("p",null,"Each of these has their own unique meaning. The main route parts denotes the initial split and can be seen on the UI. In this example it's the 70%/30% split"),(0,i.kt)("p",null,(0,i.kt)("img",{src:a(97760).Z,width:"747",height:"397"})),(0,i.kt)("p",null,"The parts parameter is how many individual blocks there can be. In the picture above we can see 4 blocks with the top being the first main route part with 2 parts to it and the bottom one being the second main route part with 2 parts in it."),(0,i.kt)("p",null,"The virtual parts is the splits ",(0,i.kt)("em",{parentName:"p"},"inside")," of a part. We can see in the first main route part above, in the first block there are 2 virtual parts splitting the USDC between hashflow and uniswap. In the second main route part we can see three virtual parts in the first block, a hashflow route with 2 different rates and one to uniswap."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"what-is-the-complexity-level"},'What is the "Complexity level?"'),(0,i.kt)("p",null,"Complexity level is how many steps a swap can go through, below are the levels and what it means for the swap. Each level adds to the previous level."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Complexity level 0:")," the source token can be wrapped or unwrapped and swapped through one liquidity pool per main route part."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Complexity level 1:")," the source token can be wrapped or unwrapped and swapped through two liquidity pools. This means there can be up to one connector token in each main route part."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Complexity level 2 (Default):")," the source token can be wrapped or unwrapped and swapped through three liquidity pools. This means there can be up to two connector tokens in each main route part. "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Complexity level 3:")," the source token can be wrapped or unwrapped and swapped through four liquidity pools. This means there can be up to three connector tokens in each main route part.")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"how-can-i-limit-the-liquidity-sources-in-the-query"},"How can I limit the liquidity sources in the query?"),(0,i.kt)("p",null,'To limit the liquidity sources to a query, select them using the "protocols" parameter as a CSV list of liquidity sources.'),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://api.1inch.io/v4.0/1/quote?protocols=SHIBASWAP,CLIPPER,SUSHI,UNISWAP_V2,ONE_INCH_LIQUIDITY_PROTOCOL,ONE_INCH_LP_1_1&"},"https://api.1inch.io/v4.0/1/quote?protocols=SHIBASWAP,CLIPPER,SUSHI,UNISWAP_V2,ONE_INCH_LIQUIDITY_PROTOCOL,ONE_INCH_LP_1_1&"),"..."),(0,i.kt)("h4",{id:"still-have-questions"},"Still have questions?"),(0,i.kt)("p",null,"Reach out to the community on",(0,i.kt)("a",{parentName:"p",href:"https://discord.com/invite/1inch"}," https://discord.com/invite/1inch")," or search around communities like stack overflow or github"))}p.isMDXComponent=!0},94012:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/insufficientAllowance-afc56651302b192854825ec6a23aaf39.png"},97760:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/routing-4e5d883517ab3244a2782139af6b946c.png"}}]);