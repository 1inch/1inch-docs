"use strict";(self.webpackChunk_1_inch_docs=self.webpackChunk_1_inch_docs||[]).push([[1403],{3905:function(e,t,n){n.d(t,{Zo:function(){return h},kt:function(){return d}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},h=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),p=c(n),d=i,m=p["".concat(s,".").concat(d)]||p[d]||u[d]||r;return n?a.createElement(m,o(o({ref:t},h),{},{components:n})):a.createElement(m,o({ref:t},h))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5547:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return h},default:function(){return p}});var a=n(87462),i=n(63366),r=(n(67294),n(3905)),o=["components"],l={sidebar_label:"API Troubleshooting"},s="1inch API troubleshooting",c={unversionedId:"educational-resources/intermediate/1inch-api-troubleshooting",id:"educational-resources/intermediate/1inch-api-troubleshooting",isDocsHomePage:!1,title:"1inch API troubleshooting",description:"In this article, we will cover:",source:"@site/docs/educational-resources/intermediate/1inch-api-troubleshooting.mdx",sourceDirName:"educational-resources/intermediate",slug:"/educational-resources/intermediate/1inch-api-troubleshooting",permalink:"/docs/educational-resources/intermediate/1inch-api-troubleshooting",editUrl:"https://github.com/1inch/1inch-docs/edit/master/docs/educational-resources/intermediate/1inch-api-troubleshooting.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"API Troubleshooting"},sidebar:"tutorialSidebar",previous:{title:"Price Impact vs. Slippage",permalink:"/docs/educational-resources/beginner/price-impact-vs-slippage-in-defi"},next:{title:"Fusion FAQ",permalink:"/docs/educational-resources/intermediate/fusion-swap-faq"}},h=[{value:"In this article, we will cover:",id:"in-this-article-we-will-cover",children:[]},{value:"What is the rate limit?",id:"what-is-the-rate-limit",children:[]},{value:"&quot;Insufficient Liquidity&quot; error",id:"insufficient-liquidity-error",children:[]},{value:"&quot;Cannot Estimate&quot;",id:"cannot-estimate",children:[]},{value:"Troubleshooting insufficient allowance / balance",id:"troubleshooting-insufficient-allowance--balance",children:[]},{value:"What are the &quot;parts&quot; parameters?",id:"what-are-the-parts-parameters",children:[]},{value:"What is the &quot;Complexity level?&quot;",id:"what-is-the-complexity-level",children:[]},{value:"How can I limit the liquidity sources in the query?",id:"how-can-i-limit-the-liquidity-sources-in-the-query",children:[]}],u={toc:h};function p(e){var t=e.components,l=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"1inch-api-troubleshooting"},"1inch API troubleshooting"),(0,r.kt)("h3",{id:"in-this-article-we-will-cover"},"In this article, we will cover:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_cdaa0dc28c"},"What is the rate limit?")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_26a92a140f"},'"Insufficient Liquidity" error')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_fdfd390620"},'"Cannot Estimate"')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_57ea327d34"},"Insufficient allowance / balance")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_caa7c96bf6"},'What are the "parts" parameters?')),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/5998758-1inch-api-troubleshooting#h_f7a65b4db1"},'What is the "Complexity level?"')),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"what-is-the-rate-limit"},"What is the rate limit?"),(0,r.kt)("p",null,"As of April 2023, all public API usage has been reduced to 30 requests per minute (rpm). For increased limits, please send an email to ",(0,r.kt)("a",{parentName:"p",href:"mailto:api@1inch.io"},"api@1inch.io")," with the details of your usage to be considered for an enterprise API key."),(0,r.kt)("p",null,"The rate limit is variable, depending on the current load of the server queried."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"insufficient-liquidity-error"},'"Insufficient Liquidity" error'),(0,r.kt)("p",null,"This error can occur for a number of reasons:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The liquidity pool has not been queried - make sure one of the aggregated sources has at least 10k of a connector token listed below."),(0,r.kt)("li",{parentName:"ul"},'If you\'re getting a quote, please make sure to take into account the decimals of the token. Do not include decimal places in the "from token amount". The API returns the number of decimal places the token supports when calling /quote or /swap'),(0,r.kt)("li",{parentName:"ul"},"There's an error in the server and is unable to find a path, this may require contacting the 1inch support team for more investigation.")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"cannot-estimate"},'"Cannot Estimate"'),(0,r.kt)("p",null,"This error occurs when the eth_estimateGas RPC call throws an error. There are many reasons why this can throw an error, and they all tend to mean the transaction is guaranteed to fail. This is a protection, so a transaction is broadcast that's going to fail. To find the precise error, disableEstimate=true can be used in the query and an eth_estimateGas RPC call can be done locally. The transaction can also be simulated with a platform like tenderly or blocknative for a better look at the transaction trace."),(0,r.kt)("p",null,"Some common reason why a transaction may fail:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A token has a fee on transfer or swap and the slippage tolerance needs to be increased"),(0,r.kt)("li",{parentName:"ul"},"A token has a fee on transfer ",(0,r.kt)("em",{parentName:"li"},"and")," the fee and referrer parameter is set causing the transaction to always fail"),(0,r.kt)("li",{parentName:"ul"},"The rate has expired and changed in the latest block.")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"troubleshooting-insufficient-allowance--balance"},"Troubleshooting insufficient allowance / balance"),(0,r.kt)("p",null,"In the case of one of these errors, you may not have a",(0,r.kt)("a",{parentName:"p",href:"https://help.1inch.io/en/articles/6147312-token-approvals"}," token approval")," or you're missing the token balance. To do a token approval, you can use the API to approve the token to the 1inch router."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(90851).Z})),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"what-are-the-parts-parameters"},'What are the "parts" parameters?'),(0,r.kt)("p",null,"The parts parameters is comprised of 3 things"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"mainRouteParts"),(0,r.kt)("li",{parentName:"ul"},"virtualParts"),(0,r.kt)("li",{parentName:"ul"},"parts")),(0,r.kt)("p",null,"Each of these has their own unique meaning. The main route parts denotes the initial split and can be seen on the UI. In this example it's the 70%/30% split"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(6540).Z})),(0,r.kt)("p",null,"The parts parameter is how many individual blocks there can be. In the picture above we can see 4 blocks with the top being the first main route part with 2 parts to it and the bottom one being the second main route part with 2 parts in it."),(0,r.kt)("p",null,"The virtual parts is the splits ",(0,r.kt)("em",{parentName:"p"},"inside")," of a part. We can see in the first main route part above, in the first block there are 2 virtual parts splitting the USDC between hashflow and uniswap. In the second main route part we can see three virtual parts in the first block, a hashflow route with 2 different rates and one to uniswap."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"what-is-the-complexity-level"},'What is the "Complexity level?"'),(0,r.kt)("p",null,"Complexity level is how many steps a swap can go through, below are the levels and what it means for the swap. Each level adds to the previous level."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Complexity level 0:")," the source token can be wrapped or unwrapped and swapped through one liquidity pool per main route part."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Complexity level 1:")," the source token can be wrapped or unwrapped and swapped through two liquidity pools. This means there can be up to one connector token in each main route part."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Complexity level 2 (Default):")," the source token can be wrapped or unwrapped and swapped through three liquidity pools. This means there can be up to two connector tokens in each main route part. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Complexity level 3:")," the source token can be wrapped or unwrapped and swapped through four liquidity pools. This means there can be up to three connector tokens in each main route part.")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"how-can-i-limit-the-liquidity-sources-in-the-query"},"How can I limit the liquidity sources in the query?"),(0,r.kt)("p",null,'To limit the liquidity sources to a query, select them using the "protocols" parameter as a CSV list of liquidity sources.'),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://api.1inch.io/v4.0/1/quote?protocols=SHIBASWAP,CLIPPER,SUSHI,UNISWAP_V2,ONE_INCH_LIQUIDITY_PROTOCOL,ONE_INCH_LP_1_1&"},"https://api.1inch.io/v4.0/1/quote?protocols=SHIBASWAP,CLIPPER,SUSHI,UNISWAP_V2,ONE_INCH_LIQUIDITY_PROTOCOL,ONE_INCH_LP_1_1&"),"..."),(0,r.kt)("h4",{id:"still-have-questions"},"Still have questions?"),(0,r.kt)("p",null,"Reach out to the community on",(0,r.kt)("a",{parentName:"p",href:"https://www.discord.gg/1inch"}," https://www.discord.gg/1inch")," or search around communities like stack overflow or github"))}p.isMDXComponent=!0},90851:function(e,t,n){t.Z=n.p+"assets/images/insufficientAllowance-afc56651302b192854825ec6a23aaf39.png"},6540:function(e,t,n){t.Z=n.p+"assets/images/routing-4e5d883517ab3244a2782139af6b946c.png"}}]);