"use strict";(self.webpackChunk_1_inch_docs=self.webpackChunk_1_inch_docs||[]).push([[6242],{3905:(t,e,a)=>{a.d(e,{Zo:()=>s,kt:()=>f});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var c=n.createContext({}),u=function(t){var e=n.useContext(c),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},s=function(t){var e=u(t.components);return n.createElement(c.Provider,{value:e},t.children)},d="mdxType",p={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,c=t.parentName,s=i(t,["components","mdxType","originalType","parentName"]),d=u(a),m=r,f=d["".concat(c,".").concat(m)]||d[m]||p[m]||l;return a?n.createElement(f,o(o({ref:e},s),{},{components:a})):n.createElement(f,o({ref:e},s))}));function f(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,o=new Array(l);o[0]=m;var i={};for(var c in e)hasOwnProperty.call(e,c)&&(i[c]=e[c]);i.originalType=t,i[d]="string"==typeof t?t:r,o[1]=i;for(var u=2;u<l;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},70088:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var n=a(87462),r=(a(67294),a(3905));const l={sidebar_label:"Auction Calculator",sidebar_position:1,title:"Auction Calculator"},o=void 0,i={unversionedId:"fusion-swap/fusion-sdk/for-resolvers/auction-calculator",id:"fusion-swap/fusion-sdk/for-resolvers/auction-calculator",title:"Auction Calculator",description:"AuctionCalculator",source:"@site/docs/fusion-swap/fusion-sdk/for-resolvers/auction-calculator.md",sourceDirName:"fusion-swap/fusion-sdk/for-resolvers",slug:"/fusion-swap/fusion-sdk/for-resolvers/auction-calculator",permalink:"/docs/fusion-swap/fusion-sdk/for-resolvers/auction-calculator",draft:!1,editUrl:"https://github.com/1inch/1inch-docs/edit/master/docs/fusion-swap/fusion-sdk/for-resolvers/auction-calculator.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Auction Calculator",sidebar_position:1,title:"Auction Calculator"},sidebar:"tutorialSidebar",previous:{title:"Creating Fusion Orders",permalink:"/docs/fusion-swap/fusion-sdk/for-integrators/creating-fusion-orders"},next:{title:"Auction Salt",permalink:"/docs/fusion-swap/fusion-sdk/for-resolvers/auction-salt"}},c={},u=[{value:"AuctionCalculator",id:"auctioncalculator",level:2},{value:"Real world example",id:"real-world-example",level:3},{value:"static AuctionCalculator.fromLimitOrderV3Struct",id:"static-auctioncalculatorfromlimitorderv3struct",level:3},{value:"AuctionCalculator.calcRateBump",id:"auctioncalculatorcalcratebump",level:3},{value:"AuctionCalculator.calcAuctionTakingAmount",id:"auctioncalculatorcalcauctiontakingamount",level:3},{value:"AuctionCalculator.fromAuctionData",id:"auctioncalculatorfromauctiondata",level:3}],s={toc:u},d="wrapper";function p(t){let{components:e,...a}=t;return(0,r.kt)(d,(0,n.Z)({},s,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"auctioncalculator"},"AuctionCalculator"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Description:")," used to calculate taker amount and auction rate"),(0,r.kt)("h3",{id:"real-world-example"},"Real world example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import {AuctionCalculator} from '@1inch/fusion-sdk'\n\nconst limitOrderStruct = {\n    allowedSender: '0x0000000000000000000000000000000000000000',\n    interactions:\n        '0x000c004e200000000000000000219ab540356cbb839cbe05303d7705faf486570009',\n    maker: '0x00000000219ab540356cbb839cbe05303d7705fa',\n    makerAsset: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n    makingAmount: '1000000000000000000',\n    offsets: '0',\n    receiver: '0x0000000000000000000000000000000000000000',\n    salt: '45118768841948961586167738353692277076075522015101619148498725069326976558864',\n    takerAsset: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n    takingAmount: '1420000000'\n}\n\nconst calculator = AuctionCalculator.fromLimitOrderV3Struct(limitOrderStruct)\n// #=> AuctionCalculator instance\n\nconst rate = calculator.calcRateBump(1673548209)\n// #=> 14285\n\nconst auctionTakingAmount = calculator.calcAuctionTakingAmount(\n    '1420000000',\n    rate\n)\n// #=> '1422028470'\n")),(0,r.kt)("h3",{id:"static-auctioncalculatorfromlimitorderv3struct"},"static AuctionCalculator.fromLimitOrderV3Struct"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Description:")," used to create auction instance from limit order"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments:")," accepts LimitOrderV3Struct as an argument"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Inner Solidity Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"salt"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"some unique value. It is necessary to be able to create limit orders with the same parameters (so that they have a different hash)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"makerAsset"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"address"),(0,r.kt)("td",{parentName:"tr",align:null},"the address of the asset user want to sell (address of a token contract)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"takerAsset"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"address"),(0,r.kt)("td",{parentName:"tr",align:null},"the address of the asset user want to buy (address of a token contract)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"maker"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"address"),(0,r.kt)("td",{parentName:"tr",align:null},"the address of the limit order creator")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receiver"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"address"),(0,r.kt)("td",{parentName:"tr",align:null},"If it contains a zero address, which means that taker asset will be sent to the address of the creator of the limit order. If user set any other value, then taker asset will be sent to the specified address")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"allowedSender"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"address"),(0,r.kt)("td",{parentName:"tr",align:null},"If it contains a zero address, which means that a limit order is available for everyone to fill. If user set any other value, then the limit order will be available for execution only for the specified address (private limit order)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"makingAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"amount of maker asset")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"takingAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"amount of taker asset")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"offsets"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"every 32's bytes represents offset of the n'ths interaction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"interactions"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"bytes"),(0,r.kt)("td",{parentName:"tr",align:null},"used to encode fusion specific data")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Order.interactions suffix structure:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"M","*","(1 + 3 bytes) - auction points coefficients with seconds delays"),(0,r.kt)("li",{parentName:"ul"},"N","*","(4 + 20 bytes) - resolver with corresponding time limit"),(0,r.kt)("li",{parentName:"ul"},"4 bytes - public time limit (started from this point of time an order can be full filled by anyone)"),(0,r.kt)("li",{parentName:"ul"},"32 bytes - taking fee (optional if flags has ","_","HAS_TAKING_FEE_FLAG)"),(0,r.kt)("li",{parentName:"ul"},"1 byte - flags")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Examples:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import {AuctionCalculator} from '@1inch/fusion-sdk'\n\nconst limitOrderStruct = {\n    allowedSender: '0x0000000000000000000000000000000000000000',\n    interactions:\n        '0x000c004e200000000000000000219ab540356cbb839cbe05303d7705faf486570009',\n    maker: '0x00000000219ab540356cbb839cbe05303d7705fa',\n    makerAsset: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n    makingAmount: '1000000000000000000',\n    offsets: '0',\n    receiver: '0x0000000000000000000000000000000000000000',\n    salt: '45118768841948961586167738353692277076075522015101619148498725069326976558864',\n    takerAsset: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n    takingAmount: '1420000000'\n}\n\nAuctionCalculator.fromLimitOrderV3Struct(limitOrderStruct)\n// #=> AuctionCalculator instance\n")),(0,r.kt)("h3",{id:"auctioncalculatorcalcratebump"},"AuctionCalculator.calcRateBump"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Description:")," used to calculate exchange rate in some point of time. user can read more about it ",(0,r.kt)("a",{parentName:"p",href:"https://docs.1inch.io/docs/fusion-swap/introduction"},"here")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments"),": time (unix timestamp)"),(0,r.kt)("h3",{id:"auctioncalculatorcalcauctiontakingamount"},"AuctionCalculator.calcAuctionTakingAmount"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Description:")," used to calculate taker amount"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"[0]"," takingAmount: string"),(0,r.kt)("li",{parentName:"ul"},"[1]"," rate: number")),(0,r.kt)("h3",{id:"auctioncalculatorfromauctiondata"},"AuctionCalculator.fromAuctionData"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Description:")," creates AuctionCalculator from suffix and salt"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"[0]"," suffix: ",(0,r.kt)("a",{parentName:"li",href:"src/auction-suffix/readme.md"},"AuctionSuffix")),(0,r.kt)("li",{parentName:"ul"},"[1]"," salt: ",(0,r.kt)("a",{parentName:"li",href:"src/auction-salt/readme.md"},"AuctionSalt"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import {AuctionSuffix, AuctionSalt, AuctionCalculator} from '@1inch/fusion-sdk'\n\nconst suffix = AuctionSuffix.decode(\n    '0x000c004e200000000000000000219ab540356cbb839cbe05303d7705faf486570009'\n)\nconst salt = AuctionSalt.decode(\n    '45118768841948961586167738353692277076075522015101619148498725069326976558864'\n)\nAuctionCalculator.fromAuctionData(suffix, salt)\n// #=> AuctionCalculator instance\n")))}p.isMDXComponent=!0}}]);